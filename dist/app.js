(()=>{var{defineProperty:O,getOwnPropertyNames:Y,getOwnPropertyDescriptor:Z}=Object,_=Object.prototype.hasOwnProperty;var U=new WeakMap,$=(z)=>{var j=U.get(z),q;if(j)return j;if(j=O({},"__esModule",{value:!0}),z&&typeof z==="object"||typeof z==="function")Y(z).map((A)=>!_.call(j,A)&&O(j,A,{get:()=>z[A],enumerable:!(q=Z(z,A))||q.enumerable}));return U.set(z,j),j};var D=(z,j)=>{for(var q in j)O(z,q,{get:j[q],enumerable:!0,configurable:!0,set:(A)=>j[q]=()=>A})};var g={};D(g,{preprocessEndpoints:()=>X,preprocessEndpoint:()=>W,formatTimestamp:()=>P,formatDuration:()=>V});function V(z){let j=z/1e6;if(j<1)return`${Math.round(z/1000)}us`;if(j<1000)return`${Math.round(j)}ms`;let q=j/1000;if(q<60)return`${q.toFixed(1)}s`;return`${(q/60).toFixed(1)}m`}function P(z,j=new Date){let q=new Date(z);if(Number.isNaN(q.getTime()))return"Unknown";let A=j.getTime()-q.getTime(),G=Math.floor(A/1000),F=Math.floor(G/60),B=Math.floor(F/60);if(B>=24)return q.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});if(A<0)return"just now";if(G<60)return G<=5?"just now":`${G}s ago`;if(F<60)return`${F}m ago`;return`${B}h ago`}function W(z,j){let q=z.results?.[0],A="unknown",G="Unknown",F="--";if(q)if(q.success)A="healthy",G="Healthy",F="OK";else A="unhealthy",G="Unhealthy",F="!!";let B={index:j,name:z.name,group:z.group||null,key:z.key,statusClass:A,statusLabel:G,statusIcon:F,hasResult:!!q};if(q){if(B.formattedDuration=V(q.duration),B.formattedTimestamp=P(q.timestamp),B.httpStatus=q.status||null,B.hasConditions=q.conditionResults?.length>0,B.hasConditions&&q.conditionResults)B.conditions=q.conditionResults.map((J)=>({condition:J.condition,icon:J.success?"✓":"✗",iconClass:J.success?"condition-icon-success":"condition-icon-failure"}))}return B}function X(z){let j=z.map((K,N)=>W(K,N)),q=0,A=0,G=0,F=[],B=[],J=null;for(let K of j)if(K.statusClass==="healthy")q++;else if(K.statusClass==="unhealthy")A++,F.push(K);else G++,B.push(K);for(let K of z){let N=K.results?.[0];if(N?.timestamp){let Q=new Date(N.timestamp);if(!J||Q>J)J=Q}}return{endpoints:j,healthyCount:q,unhealthyCount:A,unknownCount:G,totalCount:j.length,lastChecked:J?P(J.toISOString()):"Unknown",unhealthyEndpoints:F,unknownEndpoints:B,hasUnhealthy:F.length>0,hasUnknown:B.length>0,hasIssues:F.length>0||B.length>0}}if(typeof document<"u")document.addEventListener("htmx:configRequest",(z)=>{let j=z.detail;j.headers.Accept="application/json"}),document.addEventListener("htmx:beforeSwap",(z)=>{let j=z.detail;if(j.target.id==="app"&&j.xhr.responseURL.includes("/api/v1/endpoints/statuses"))try{let q=JSON.parse(j.xhr.responseText),A=X(q);window.__endpoints=A.endpoints,j.serverResponse=JSON.stringify(A)}catch(q){if(console.error("Failed to preprocess endpoints:",q),j.shouldSwap=!1,j.target&&"innerHTML"in j.target)j.target.innerHTML='<div class="error-message">Unable to load endpoint statuses. Please try again later.</div>'}});})();
