:80 {
    encode gzip zstd

    header {
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        Content-Security-Policy "default-src 'self'; script-src 'self' https://unpkg.com; style-src 'self'; img-src 'self' data:; frame-ancestors 'none'"
    }

    handle /api/* {
        reverse_proxy localhost:8080 {
            header_up Host {upstream_hostport}
        }
    }

    handle {
        root * /srv
        try_files {path} /index.html
        file_server
    }
}
